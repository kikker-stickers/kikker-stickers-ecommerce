<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kikker Sticker - Custom Decals</title>
    <link rel="icon" href="data:," />
    <link
      rel="stylesheet"
      href="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.css"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div id="processing-spinner">
      <div id="spinner"></div>
    </div>
    <header id="main-header">
      <h1 id="main-title">Welcome to Kikker Sticker</h1>
      <div id="cart-summary" class="snipcart-summary">
        <a id="checkout-link" href="#" class="snipcart-checkout">
          <i id="cart-icon" class="fas fa-shopping-cart"></i>
          <span id="cart-items" class="snipcart-total-items"></span> items -
          <span id="cart-total" class="snipcart-total-price"></span>
        </a>
      </div>
    </header>

    <main id="main-content">
      <div id="sticker-container" class="sticker-container">
        <section id="order-section" class="sticker-section">
          <h2 id="order-title">Order Your Custom Sticker</h2>
          <form id="orderForm">
            <div id="image-upload" class="form-group">
              <label for="image">Upload Image</label>
              <div id="file-input-wrapper" class="file-input-wrapper">
                <label id="file-input-label" for="image" class="file-input-button">Choose File</label>
                <span id="file-input-name" class="file-input-name" aria-live="polite"></span>
                <input type="file" id="image" name="image" accept="image/*" class="hidden" />
              </div>
            </div>

            <div id="shape-select" class="form-group">
              <label for="shape">Shape</label>
              <select id="shape" name="shape">
                <option value="">Select a shape</option>
                <option value="Circle">Circle</option>
                <option value="Square">Square</option>
                <option value="Oval">Oval</option>
                <option value="Rectangle">Rectangle</option>
              </select>
            </div>

            <div id="size-select" class="form-group">
              <label for="size">Size</label>
              <select id="size" name="size">
                <option value="">Select a size</option>
                <!-- Options will be dynamically populated -->
              </select>
            </div>

            <div id="quantity-select" class="form-group">
              <label for="quantity">Quantity</label>
              <select id="quantity" name="quantity">
                <option value="">Select a quantity</option>
                <!-- Options will be dynamically populated -->
              </select>
            </div>

            <div id="priceDisplay"></div>

            <button id="uploadSticker" type="submit">Add to cart</button>
          </form>
        </section>

        <section id="preview-section" class="sticker-section">
          <h2 id="preview-title">Sticker Preview</h2>
          <div id="stickerDisplay">
            <img id="uploadedImage" src="/placeholder.png" alt="Uploaded image" />
          </div>
          <div id="move-controls" class="control-buttons">
            <button id="moveLeft">←</button>
            <button id="moveUp">↑</button>
            <button id="moveDown">↓</button>
            <button id="moveRight">→</button>
          </div>
          <div id="zoom-controls" class="control-buttons">
            <button id="zoomOut">-</button>
            <button id="zoomIn">+</button>
          </div>
        </section>
      </div>

      <section id="price-list" class="price-table-container">
        <h2 id="price-list-title">Price List</h2>
        <div id="priceTable">
          <!-- The price table will be dynamically generated and inserted here by the server -->
        </div>
      </section>
    </main>

    <footer id="main-footer">
      <p id="copyright">&copy; 2024 Kikker Stickers. All rights reserved.</p>
    </footer>
    <script src="/script.js"></script>
    <script src="/sticker.js"></script>
    <script>
      document.getElementById("image").addEventListener("change", function (e) {
        var fileName = e.target.files[0]
          ? e.target.files[0].name
          : "No file chosen";
        document.getElementById("file-input-name").textContent = fileName;
      });
    </script>
    <script
      async
      src="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.js"
    ></script>
    <div
      hidden
      id="snipcart"
      data-api-key="YTdlNzRkM2MtMmFjOS00NzUzLWExYjItNTVkMTQ2N2U5N2M4NjM4NTk3Njc5MTc5NDY3OTQ3"
    ></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <script>
      // Add this script to handle touch scrolling for the price table
      document.addEventListener("DOMContentLoaded", function () {
        const priceTable = document.getElementById("priceTable");
        let isScrolling = false;
        let startX;
        let scrollLeft;

        priceTable.addEventListener("touchstart", function (e) {
          isScrolling = true;
          startX = e.touches[0].pageX - priceTable.offsetLeft;
          scrollLeft = priceTable.scrollLeft;
        });

        priceTable.addEventListener("touchmove", function (e) {
          if (!isScrolling) return;
          e.preventDefault();
          const x = e.touches[0].pageX - priceTable.offsetLeft;
          const walk = (x - startX) * 2;
          priceTable.scrollLeft = scrollLeft - walk;
        });

        priceTable.addEventListener("touchend", function () {
          isScrolling = false;
        });
      });
    </script>
  </body>
</html>
