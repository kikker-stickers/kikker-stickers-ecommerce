<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kikker Sticker - Custom Decals</title>
    <link rel="icon" href="data:," />
    <link
      rel="stylesheet"
      href="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        20%,
        60% {
          transform: translateX(-5px);
        }
        40%,
        80% {
          transform: translateX(5px);
        }
      }
      .shake {
        animation: shake 0.5s ease-in-out;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800 font-sans">
    <div
      id="processing-spinner"
      class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 hidden"
    >
      <div
        class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"
      ></div>
    </div>
    <header class="bg-blue-500 text-white text-center py-4">
      <h1 class="text-3xl font-bold">Welcome to Kikker Sticker</h1>
      <div id="cart-summary" class="mt-2">
        <a href="#" class="snipcart-checkout text-white hover:text-gray-200">
          <i class="fas fa-shopping-cart"></i>
          <span class="snipcart-total-items"></span> items -
          <span class="snipcart-total-price"></span>
        </a>
      </div>
    </header>

    <main class="container mx-auto px-4 py-8">
      <div class="flex flex-col md:flex-row gap-8">
        <section class="bg-white rounded-lg shadow-md p-6 flex-1">
          <h2 class="text-2xl font-semibold mb-4">Order Your Custom Sticker</h2>
          <form id="orderForm" class="space-y-4">
            <div id="imageUploadGroup">
              <label for="image" class="block font-medium mb-1"
                >Upload Image</label
              >
              <div class="relative">
                <label
                  for="image"
                  class="cursor-pointer bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded inline-block"
                >
                  Choose File
                </label>
                <span
                  id="file-input-name"
                  class="ml-3"
                  aria-live="polite"
                ></span>
                <input
                  type="file"
                  id="image"
                  name="image"
                  accept="image/*"
                  class="hidden"
                />
              </div>
            </div>

            <div id="shapeGroup">
              <label for="shape" class="block font-medium mb-1">Shape</label>
              <select
                id="shape"
                name="shape"
                class="w-full border border-gray-300 rounded px-3 py-2"
              >
                <option value="">Select a shape</option>
                <option value="Circle">Circle</option>
                <option value="Square">Square</option>
                <option value="Oval">Oval</option>
                <option value="Rectangle">Rectangle</option>
              </select>
            </div>

            <div id="sizeGroup">
              <label for="size" class="block font-medium mb-1">Size</label>
              <select
                id="size"
                name="size"
                class="w-full border border-gray-300 rounded px-3 py-2"
              >
                <option value="">Select a size</option>
                <!-- Options will be dynamically populated -->
              </select>
            </div>

            <div id="quantityGroup">
              <label for="quantity" class="block font-medium mb-1"
                >Quantity</label
              >
              <select
                id="quantity"
                name="quantity"
                class="w-full border border-gray-300 rounded px-3 py-2"
              >
                <option value="">Select a quantity</option>
                <!-- Options will be dynamically populated -->
              </select>
            </div>

            <div id="priceDisplay" class="text-xl font-bold"></div>

            <button
              id="addToCart"
              type="submit"
              class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600"
            >
              Add to cart
            </button>
          </form>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6 flex-1">
          <h2 class="text-2xl font-semibold mb-4">Sticker Preview</h2>
          <div
            id="stickerDisplay"
            class="w-full max-w-sm mx-auto aspect-square relative overflow-hidden mb-4"
          >
            <img
              id="uploadedImage"
              src="/placeholder.png"
              alt="Uploaded image"
              class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 max-w-[150%] max-h-[150%] object-cover"
            />
          </div>
          <div class="flex justify-center space-x-2 mb-4">
            <button
              id="moveLeft"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              ←
            </button>
            <button
              id="moveUp"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              ↑
            </button>
            <button
              id="moveDown"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              ↓
            </button>
            <button
              id="moveRight"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              →
            </button>
          </div>
          <div class="flex justify-center space-x-2">
            <button
              id="zoomOut"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              -
            </button>
            <button
              id="zoomIn"
              class="bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded"
            >
              +
            </button>
          </div>
        </section>
      </div>

      <section class="bg-white rounded-lg shadow-md p-6 mt-8">
        <h2 class="text-2xl font-semibold mb-4">Price List</h2>
        <div id="priceTable" class="overflow-x-auto">
          <!-- The price table will be dynamically generated and inserted here by the server -->
        </div>
      </section>
    </main>

    <footer class="bg-gray-800 text-white text-center py-4 mt-8">
      <p>&copy; 2024 Kikker Stickers. All rights reserved.</p>
    </footer>
    <script src="/script.js"></script>
    <script src="/sticker.js"></script>
    <script>
      document.getElementById("image").addEventListener("change", function (e) {
        var fileName = e.target.files[0]
          ? e.target.files[0].name
          : "No file chosen";
        document.getElementById("file-input-name").textContent = fileName;
      });
    </script>
    <script
      async
      src="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.js"
    ></script>
    <div
      hidden
      id="snipcart"
      data-api-key="YTdlNzRkM2MtMmFjOS00NzUzLWExYjItNTVkMTQ2N2U5N2M4NjM4NTk3Njc5MTc5NDY3OTQ3"
    ></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
  </body>
</html>
